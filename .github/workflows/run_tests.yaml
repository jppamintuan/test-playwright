name: Run Playwright Tests

on:
  workflow_dispatch:
    inputs:
      env:
        description: 'Select the Environment to run the tests'
        type: choice
        required: true
        options:
          - uat

run-name: Running playwright tests on ${{ github.event.inputs.env }}

jobs:
  fetch-secrets:
    runs-on: self-hosted

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Setup Vault
      uses: hashicorp/vault-action@v2
      with:
        url: https://vault.svc.coexservices.com.au
        role: github-actions-role
        method: jwt
        path: github-actions
        exportToken: true
